{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rachaelroyack/Library/Mobile Documents/com~apple~CloudDocs/WINDOWS-CODING-CLASS/CODING-CLASS/Desktop/web-projects/coding-class/course_work/StrangerThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rachaelroyack/Library/Mobile Documents/com~apple~CloudDocs/WINDOWS-CODING-CLASS/CODING-CLASS/Desktop/web-projects/coding-class/course_work/StrangerThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import'./Login.css';import{loginUser,getUserProfile}from\"../api\";import{Snackbar}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var setUsername=_ref.setUsername,username=_ref.username,setPassword=_ref.setPassword,password=_ref.password,navigate=_ref.navigate,setToken=_ref.setToken,setUserProfile=_ref.setUserProfile,setOpen=_ref.setOpen,open=_ref.open;var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var results,profileResults,myProfile,form;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return loginUser(username,password);case 2:results=_context.sent;if(!results.success){_context.next=14;break;}setToken(results.data.token);window.localStorage.setItem('token',results.data.token);_context.next=8;return getUserProfile(results.data.token);case 8:profileResults=_context.sent;myProfile=profileResults.data;setUserProfile(myProfile);navigate('/profile');_context.next=17;break;case 14:setOpen(true);form=document.querySelector('form');form.reset();case 17:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{className:\"loginForm\",onSubmit:function onSubmit(event){event.preventDefault();handleSubmit();},children:[/*#__PURE__*/_jsx(Snackbar,{open:open,anchorOrigin:{vertical:\"top\",horizontal:\"center\"},message:\"Username or Password is incorrect, please try again\",autoHideDuration:2000,onClose:function onClose(){return setOpen(false);}}),/*#__PURE__*/_jsx(\"input\",{className:\"usernameEntry\",type:\"text\",placeholder:\"Enter Username\",onChange:function onChange(event){return setUsername(event.target.value);}}),/*#__PURE__*/_jsx(\"input\",{className:\"passwordEntry\",type:\"password\",placeholder:\"Enter Password\",onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]});};export default Login;","map":{"version":3,"names":["React","loginUser","getUserProfile","Snackbar","Login","setUsername","username","setPassword","password","navigate","setToken","setUserProfile","setOpen","open","handleSubmit","results","success","data","token","window","localStorage","setItem","profileResults","myProfile","form","document","querySelector","reset","event","preventDefault","vertical","horizontal","target","value"],"sources":["/Users/rachaelroyack/Library/Mobile Documents/com~apple~CloudDocs/WINDOWS-CODING-CLASS/CODING-CLASS/Desktop/web-projects/coding-class/course_work/StrangerThings/src/Components/Login.js"],"sourcesContent":["import React from \"react\";\nimport './Login.css';\nimport { loginUser, getUserProfile } from \"../api\";\nimport { Snackbar } from \"@mui/material\";\n\nconst Login = ({setUsername, username, setPassword, password, navigate, setToken, setUserProfile, setOpen, open}) => {\n\n    const handleSubmit = async () => {\n        const results = await loginUser(username, password);\n        \n        if (results.success) {\n            setToken(results.data.token)\n            window.localStorage.setItem('token', results.data.token) \n            const profileResults = await getUserProfile(results.data.token)\n            let myProfile = profileResults.data\n            setUserProfile(myProfile)\n            navigate('/profile') \n        } else {\n            setOpen(true)\n            let form = document.querySelector('form')\n            form.reset()\n        }\n    }\n    \n    return (\n        <form className=\"loginForm\" onSubmit = {(event)=> {\n            event.preventDefault();\n                handleSubmit()\n            }\n        }>\n            <Snackbar \n                open={open}\n                anchorOrigin= {{vertical: \"top\", horizontal: \"center\"}}\n                message='Username or Password is incorrect, please try again' \n                autoHideDuration={2000} \n                onClose={() => setOpen(false)}\n                >\n            </Snackbar>\n            <input className=\"usernameEntry\"\n            type='text'\n            placeholder=\"Enter Username\"\n            onChange={(event) => setUsername(event.target.value)}>\n            </input>\n            <input className=\"passwordEntry\"\n            type='password'\n            placeholder=\"Enter Password\"\n            onChange={(event) => setPassword(event.target.value) }>\n            </input>\n\n\n            <button type='submit'>Submit</button>\n        </form>\n    )\n}\n\n\nexport default Login;"],"mappings":"4fAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAO,aAAP,CACA,OAASC,SAAT,CAAoBC,cAApB,KAA0C,QAA1C,CACA,OAASC,QAAT,KAAyB,eAAzB,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,MAAuG,IAArGC,YAAqG,MAArGA,WAAqG,CAAxFC,QAAwF,MAAxFA,QAAwF,CAA9EC,WAA8E,MAA9EA,WAA8E,CAAjEC,QAAiE,MAAjEA,QAAiE,CAAvDC,QAAuD,MAAvDA,QAAuD,CAA7CC,QAA6C,MAA7CA,QAA6C,CAAnCC,cAAmC,MAAnCA,cAAmC,CAAnBC,OAAmB,MAAnBA,OAAmB,CAAVC,IAAU,MAAVA,IAAU,CAEjH,GAAMC,aAAY,6FAAG,qMACKb,UAAS,CAACK,QAAD,CAAWE,QAAX,CADd,QACXO,OADW,mBAGbA,OAAO,CAACC,OAHK,0BAIbN,QAAQ,CAACK,OAAO,CAACE,IAAR,CAAaC,KAAd,CAAR,CACAC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAqCN,OAAO,CAACE,IAAR,CAAaC,KAAlD,EALa,sBAMgBhB,eAAc,CAACa,OAAO,CAACE,IAAR,CAAaC,KAAd,CAN9B,QAMPI,cANO,eAOTC,SAPS,CAOGD,cAAc,CAACL,IAPlB,CAQbN,cAAc,CAACY,SAAD,CAAd,CACAd,QAAQ,CAAC,UAAD,CAAR,CATa,+BAWbG,OAAO,CAAC,IAAD,CAAP,CACIY,IAZS,CAYFC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAZE,CAabF,IAAI,CAACG,KAAL,GAba,uDAAH,kBAAZb,aAAY,2CAAlB,CAiBA,mBACI,cAAM,SAAS,CAAC,WAAhB,CAA4B,QAAQ,CAAI,kBAACc,KAAD,CAAU,CAC9CA,KAAK,CAACC,cAAN,GACIf,YAAY,GACf,CAHL,wBAKI,KAAC,QAAD,EACI,IAAI,CAAED,IADV,CAEI,YAAY,CAAG,CAACiB,QAAQ,CAAE,KAAX,CAAkBC,UAAU,CAAE,QAA9B,CAFnB,CAGI,OAAO,CAAC,qDAHZ,CAII,gBAAgB,CAAE,IAJtB,CAKI,OAAO,CAAE,yBAAMnB,QAAO,CAAC,KAAD,CAAb,EALb,EALJ,cAaI,cAAO,SAAS,CAAC,eAAjB,CACA,IAAI,CAAC,MADL,CAEA,WAAW,CAAC,gBAFZ,CAGA,QAAQ,CAAE,kBAACgB,KAAD,QAAWvB,YAAW,CAACuB,KAAK,CAACI,MAAN,CAAaC,KAAd,CAAtB,EAHV,EAbJ,cAkBI,cAAO,SAAS,CAAC,eAAjB,CACA,IAAI,CAAC,UADL,CAEA,WAAW,CAAC,gBAFZ,CAGA,QAAQ,CAAE,kBAACL,KAAD,QAAWrB,YAAW,CAACqB,KAAK,CAACI,MAAN,CAAaC,KAAd,CAAtB,EAHV,EAlBJ,cAyBI,eAAQ,IAAI,CAAC,QAAb,oBAzBJ,GADJ,CA6BH,CAhDD,CAmDA,cAAe7B,MAAf"},"metadata":{},"sourceType":"module"}