{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rachaelroyack/Library/Mobile Documents/com~apple~CloudDocs/WINDOWS-CODING-CLASS/CODING-CLASS/Desktop/web-projects/coding-class/course_work/StrangerThings/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/rachaelroyack/Library/Mobile Documents/com~apple~CloudDocs/WINDOWS-CODING-CLASS/CODING-CLASS/Desktop/web-projects/coding-class/course_work/StrangerThings/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/rachaelroyack/Library/Mobile Documents/com~apple~CloudDocs/WINDOWS-CODING-CLASS/CODING-CLASS/Desktop/web-projects/coding-class/course_work/StrangerThings/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useParams}from\"react-router-dom\";import{sendMessage,getUserProfile}from\"../api\";import{Snackbar}from\"@mui/material\";import'./Message.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Message=function Message(_ref){var posts=_ref.posts,token=_ref.token,open=_ref.open,setOpen=_ref.setOpen,navigate=_ref.navigate,setUserProfile=_ref.setUserProfile;if(posts.length){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useParams=useParams(),postID=_useParams.postID;var _posts$filter=posts.filter(function(post){return post._id===postID;}),_posts$filter2=_slicedToArray(_posts$filter,1),currentPost=_posts$filter2[0];//this returns array of 1 item\nvar title=currentPost.title,description=currentPost.description,location=currentPost.location,price=currentPost.price,willDeliver=currentPost.willDeliver,_id=currentPost._id;var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var results,profileResults,myProfile;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return sendMessage(_id,message,token);case 2:results=_context.sent;if(!results.success){_context.next=11;break;}setOpen(true);_context.next=7;return getUserProfile(token);case 7:profileResults=_context.sent;myProfile=profileResults.data;setUserProfile(myProfile);navigate('/profile');case 11:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"postInMessage\",children:[/*#__PURE__*/_jsx(\"h3\",{children:title}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Description: \"}),description]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" \",price]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Location:\"}),\" \",location]}),willDeliver?/*#__PURE__*/_jsx(\"p\",{children:\"Delivery: Yes\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Delivery: No\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"messageSection\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Message User About This Post\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){event.preventDefault();handleSubmit();},children:[/*#__PURE__*/_jsx(Snackbar,{open:open,anchorOrigin:{vertical:\"top\",horizontal:\"center\"},message:\"Message Sent\",autoHideDuration:2000,onClose:function onClose(){return setOpen(false);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputMessage\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"type message here\",onChange:function onChange(event){return setMessage(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Send\"})]})]})]})]});}else{return/*#__PURE__*/_jsx(\"h3\",{children:\"Loading Message Box...\"});}};export default Message;","map":{"version":3,"names":["React","useState","useParams","sendMessage","getUserProfile","Snackbar","Message","posts","token","open","setOpen","navigate","setUserProfile","length","message","setMessage","postID","filter","post","_id","currentPost","title","description","location","price","willDeliver","handleSubmit","results","success","profileResults","myProfile","data","event","preventDefault","vertical","horizontal","target","value"],"sources":["/Users/rachaelroyack/Library/Mobile Documents/com~apple~CloudDocs/WINDOWS-CODING-CLASS/CODING-CLASS/Desktop/web-projects/coding-class/course_work/StrangerThings/src/Components/Message.js"],"sourcesContent":["import React, {useState} from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { sendMessage, getUserProfile } from \"../api\";\nimport { Snackbar } from \"@mui/material\";\nimport './Message.css'\n\nconst Message = ({posts, token, open, setOpen, navigate, setUserProfile}) => {\n    if (posts.length){ \n    const [message, setMessage] = useState('')\n\n    const { postID } = useParams();\n\n    const [currentPost] =  posts.filter(post => post._id === postID ); //this returns array of 1 item\n    const {title, description, location, price, willDeliver, _id} = currentPost;\n\n    const handleSubmit = async() => {\n        const results = await sendMessage(_id, message, token);\n        \n        if (results.success) {\n            setOpen(true)\n            const profileResults = await getUserProfile(token)\n            let myProfile = profileResults.data\n            setUserProfile(myProfile)\n            navigate('/profile') \n        } \n    }\n\n        return(\n        <main>\n            <div className='postInMessage'>\n                <h3>{title}</h3>\n                <p><strong>Description: </strong>{description}</p>\n                <p><strong>Price:</strong> {price}</p>\n                <p><strong>Location:</strong> {location}</p>\n                {willDeliver ? (<p>Delivery: Yes</p>) : <p>Delivery: No</p>}\n            </div>\n            <div className=\"messageSection\">\n            <h3>Message User About This Post</h3>\n                <form onSubmit = {(event)=> {\n                event.preventDefault();\n                    handleSubmit()\n                }}>\n                <Snackbar \n                    open={open}\n                    anchorOrigin= {{vertical: \"top\", horizontal: \"center\"}}\n                    message='Message Sent' \n                    autoHideDuration={2000} \n                    onClose={() => setOpen(false)}\n                    >\n                </Snackbar>\n                <div className=\"inputMessage\">\n                <input type='text' placeholder=\"type message here\" onChange={event => setMessage(event.target.value)}></input>\n                <button type='submit'>Send</button>\n                </div>\n                </form>\n            </div>\n        </main>\n\n    )\n} else {\n    return <h3>Loading Message Box...</h3>\n}\n}\n\nexport default Message;\n\n"],"mappings":"kvBAAA,MAAOA,MAAP,EAAeC,QAAf,KAA8B,OAA9B,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,WAAT,CAAsBC,cAAtB,KAA4C,QAA5C,CACA,OAASC,QAAT,KAAyB,eAAzB,CACA,MAAO,eAAP,C,wFAEA,GAAMC,QAAO,CAAG,QAAVA,QAAU,MAA6D,IAA3DC,MAA2D,MAA3DA,KAA2D,CAApDC,KAAoD,MAApDA,KAAoD,CAA7CC,IAA6C,MAA7CA,IAA6C,CAAvCC,OAAuC,MAAvCA,OAAuC,CAA9BC,QAA8B,MAA9BA,QAA8B,CAApBC,cAAoB,MAApBA,cAAoB,CACzE,GAAIL,KAAK,CAACM,MAAV,CAAiB,CACjB,cAA8BZ,QAAQ,CAAC,EAAD,CAAtC,wCAAOa,OAAP,eAAgBC,UAAhB,eAEA,eAAmBb,SAAS,EAA5B,CAAQc,MAAR,YAAQA,MAAR,CAEA,kBAAuBT,KAAK,CAACU,MAAN,CAAa,SAAAC,IAAI,QAAIA,KAAI,CAACC,GAAL,GAAaH,MAAjB,EAAjB,CAAvB,gDAAOI,WAAP,mBAAmE;AACnE,GAAOC,MAAP,CAAgED,WAAhE,CAAOC,KAAP,CAAcC,WAAd,CAAgEF,WAAhE,CAAcE,WAAd,CAA2BC,QAA3B,CAAgEH,WAAhE,CAA2BG,QAA3B,CAAqCC,KAArC,CAAgEJ,WAAhE,CAAqCI,KAArC,CAA4CC,WAA5C,CAAgEL,WAAhE,CAA4CK,WAA5C,CAAyDN,GAAzD,CAAgEC,WAAhE,CAAyDD,GAAzD,CAEA,GAAMO,aAAY,6FAAG,gMACKvB,YAAW,CAACgB,GAAD,CAAML,OAAN,CAAeN,KAAf,CADhB,QACXmB,OADW,mBAGbA,OAAO,CAACC,OAHK,0BAIblB,OAAO,CAAC,IAAD,CAAP,CAJa,sBAKgBN,eAAc,CAACI,KAAD,CAL9B,QAKPqB,cALO,eAMTC,SANS,CAMGD,cAAc,CAACE,IANlB,CAObnB,cAAc,CAACkB,SAAD,CAAd,CACAnB,QAAQ,CAAC,UAAD,CAAR,CARa,uDAAH,kBAAZe,aAAY,2CAAlB,CAYI,mBACA,qCACI,aAAK,SAAS,CAAC,eAAf,wBACI,oBAAKL,KAAL,EADJ,cAEI,kCAAG,yCAAH,CAAkCC,WAAlC,GAFJ,cAGI,kCAAG,kCAAH,KAA4BE,KAA5B,GAHJ,cAII,kCAAG,qCAAH,KAA+BD,QAA/B,GAJJ,CAKKE,WAAW,cAAI,oCAAJ,cAA4B,mCAL5C,GADJ,cAQI,aAAK,SAAS,CAAC,gBAAf,wBACA,oDADA,cAEI,cAAM,QAAQ,CAAI,kBAACO,KAAD,CAAU,CAC5BA,KAAK,CAACC,cAAN,GACIP,YAAY,GACf,CAHD,wBAIA,KAAC,QAAD,EACI,IAAI,CAAEjB,IADV,CAEI,YAAY,CAAG,CAACyB,QAAQ,CAAE,KAAX,CAAkBC,UAAU,CAAE,QAA9B,CAFnB,CAGI,OAAO,CAAC,cAHZ,CAII,gBAAgB,CAAE,IAJtB,CAKI,OAAO,CAAE,yBAAMzB,QAAO,CAAC,KAAD,CAAb,EALb,EAJA,cAYA,aAAK,SAAS,CAAC,cAAf,wBACA,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,mBAA/B,CAAmD,QAAQ,CAAE,kBAAAsB,KAAK,QAAIjB,WAAU,CAACiB,KAAK,CAACI,MAAN,CAAaC,KAAd,CAAd,EAAlE,EADA,cAEA,eAAQ,IAAI,CAAC,QAAb,kBAFA,GAZA,GAFJ,GARJ,GADA,CAgCP,CApDG,IAoDG,CACH,mBAAO,8CAAP,CACH,CACA,CAxDD,CA0DA,cAAe/B,QAAf"},"metadata":{},"sourceType":"module"}